(this["webpackJsonpmoviesboard-front"]=this["webpackJsonpmoviesboard-front"]||[]).push([[0],{39:function(e,t,c){},40:function(e,t,c){},61:function(e,t,c){"use strict";c.r(t);var a=c(2),s=c.n(a),i=c(33),n=c.n(i),r=(c(39),c(40),c(4)),l=c(10),o={formatDate:function(e){return new Date(e).toLocaleString("fr-FR",{year:"numeric",month:"long",day:"numeric"})}},j=c(13),d=c(17),b=c.n(d),u=c(21),m=c(11),h=c.n(m),O="http://localhost:3000",p="?api_key=".concat("0639b6159e91315cc2baafcb5b39dc70"),x={fetchMovies:function(e,t,c){return Object(u.a)(b.a.mark((function a(){var s,i;return b.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return s="".concat(O,"/movies?_sort=id&_order=desc"),e?s="".concat(O,"/movies/").concat(e):t&&c&&(s="".concat(O,"/movies?").concat(t,"=").concat(c)),a.prev=2,a.next=5,h.a.get(s);case 5:return i=a.sent,a.abrupt("return",i.data);case 9:return a.prev=9,a.t0=a.catch(2),a.abrupt("return",v(a.t0));case 12:case"end":return a.stop()}}),a,null,[[2,9]])})))()},add:function(e){return h.a.post("".concat(O,"/movies"),e).then((function(e){return e.data})).catch(v)},remove:function(e){return h.a.delete("".concat(O,"/movies/").concat(e)).then((function(e){return e.data})).catch(v)},update:function(e,t){return h.a.put("".concat(O,"/movies/").concat(t),e).then((function(e){return e.data})).catch(v)},fetchMovieData:function(e,t){return Object(u.a)(b.a.mark((function c(){var a,s;return b.a.wrap((function(c){for(;;)switch(c.prev=c.next){case 0:return a="".concat("https://api.themoviedb.org/3/"),a+=e?"movie/".concat(e).concat(p):"search/movie".concat(p,"&query=").concat(t),c.prev=2,c.next=5,h.a.get(a);case 5:return s=c.sent,c.abrupt("return",s.data);case 9:return c.prev=9,c.t0=c.catch(2),c.abrupt("return",v(c.t0));case 12:case"end":return c.stop()}}),c,null,[[2,9]])})))()}},v=function(e){return console.log(e),"error"},f=x,g=c(3),_=c(1),N=function(e){var t=e.id,c=e.title,a=Object(g.f)(),s=Object(g.e)();return Object(_.jsxs)("button",{onClick:function(){window.confirm("Voulez-vous vraiment supprimer ".concat(c,"\xa0?"))&&f.remove(t).then((function(e){var t="Le film a bien \xe9t\xe9 supprim\xe9\xa0!";"error"===e&&(t="Oops, une erreur s'est produite\u2026"),window.alert(t),"/"===s.pathname?window.location.reload():a("/")}))},className:"button",children:[Object(_.jsx)(j.b,{})," Supprimer"]})},k=c(34),w=function(e){var t=e.id;return Object(_.jsxs)(l.b,{className:"button",to:{pathname:"/edit/".concat(t)},children:[Object(_.jsx)(k.a,{})," \xc9diter"]})},y=function(e){var t=e.data,c=t.release_date;return Object(_.jsxs)("figure",{className:"card smooth-apparition",children:[Object(_.jsx)(l.b,{to:{pathname:"/movies/".concat(t.id)},children:Object(_.jsx)("img",{src:t.poster,alt:"Couverture"})}),Object(_.jsxs)("figcaption",{children:[Object(_.jsx)(l.b,{to:{pathname:"/movies/".concat(t.id)},children:Object(_.jsx)("h3",{className:"title-small",children:t.title})}),Object(_.jsxs)("div",{children:[Object(_.jsx)("span",{children:Object(_.jsx)("span",{className:"title-small date",children:o.formatDate(c)})}),Object(_.jsx)("p",{className:"card-description",children:t.description}),Object(_.jsxs)("div",{class:"card-buttons",children:[Object(_.jsx)(w,{id:t.id}),Object(_.jsx)(N,{id:t.id,title:t.title})]})]})]})]})},C=function(){return Object(_.jsx)("nav",{className:"nav",id:"nav",children:Object(_.jsxs)("ul",{className:"nav-bar",children:[Object(_.jsx)("li",{className:"nav-bar__home",children:Object(_.jsx)(l.c,{exact:"true",to:"/",className:function(e){return"nav-link"+(e.isActive?" activated":"")},children:Object(_.jsx)(j.d,{})})}),Object(_.jsx)("li",{children:Object(_.jsx)(l.c,{exact:"true",to:"/add",className:function(e){return"nav-link"+(e.isActive?" activated":"")},children:Object(_.jsx)(j.c,{})})})]})})},S=c(14),D=c(6),F=(c(30),c(31),c(32),function(){var e=Object(a.useState)(null),t=Object(r.a)(e,2),c=t[0],s=t[1],i=Object(a.useState)(null),n=Object(r.a)(i,2),l=n[0],o=n[1],j=Object(a.useRef)(),d=Object(a.useRef)(),b=function(){f.fetchMovies().then((function(e){""!==e&&s(e)})).catch((function(e){return o("Erreur serveur : Impossible de r\xe9cup\xe9rer les films de la biblioth\xe8que\u2026")}))};Object(a.useEffect)((function(){b()}),[]);var u=function(e,t){""!==t&&f.fetchMovies(void 0,e,t).then((function(e){s(e)}))};return Object(_.jsxs)("div",{className:"home pages-background",children:[Object(_.jsx)(C,{}),Object(_.jsxs)("main",{className:"home-main",children:[Object(_.jsxs)("h1",{className:"title-large",children:[Object(_.jsx)("span",{children:"My movies"}),Object(_.jsx)("span",{children:"board"})]}),Object(_.jsxs)("div",{className:"home__search",children:[Object(_.jsx)("input",{className:"home__search-bar",ref:j,onKeyDown:function(e){13===e.keyCode&&""!==e.target.value&&u(d.current.value,j.current.value)},type:"search",placeholder:"Titre, date de sortie, cat\xe9gorie",id:"search-bar"}),Object(_.jsxs)("select",{ref:d,onChange:function(e){d.current.value=e.target.value,"tout"===d.current.value||""===d.current.value?b():""!==j.current.value&&u(d.current.value,j.current.value)},name:"filter",id:"filter-select",className:"home__search--select",multiple:!0,children:[Object(_.jsx)("option",{value:"tout",children:"Tout"}),Object(_.jsx)("option",{value:"title_like",children:"Titre"}),Object(_.jsx)("option",{value:"release_date_like",children:"Date de sortie"}),Object(_.jsx)("option",{value:"categories_like",children:"Cat\xe9gories"})]})]}),Object(_.jsxs)("div",{children:[l&&Object(_.jsx)("div",{className:"error",children:l}),c&&Object(_.jsx)("div",{children:0===c.length&&Object(_.jsx)("div",{className:"home__no-result",children:Object(_.jsx)("h2",{class:"title-medium",children:"Ce film n'est pas pr\xe9sent dans la biblioth\xe8que\u2026"})})}),c&&Object(_.jsx)(S.a,{className:"home__horizontal-scroll",modules:[D.b,D.c],spaceBetween:10,pagination:{clickable:!0},navigation:!0,slidesPerView:1,breakpoints:{768:{width:768,slidesPerView:2},1024:{width:1024,slidesPerView:3}},children:0!==c&&c.map((function(e,t,c){return Object(_.jsx)(S.b,{virtualIndex:c,children:Object(_.jsx)(y,{id:e.id,data:e},e.id)},t)}))})]})]})]})}),M=c(5),V=c(12),E="https://api.themoviedb.org/3/",A="?api_key=".concat("0639b6159e91315cc2baafcb5b39dc70"),P=function(e){var t=Object(a.useState)(0),c=Object(r.a)(t,2),s=c[0],i=c[1],n=Object(a.useState)(null),o=Object(r.a)(n,2),d=o[0],b=o[1],u=Object(a.useState)(null),m=Object(r.a)(u,2),O=m[0],p=m[1],x=Object(a.useState)(!0),v=Object(r.a)(x,2),g=v[0],N=v[1],k=Object(a.useState)({title:"",release_date:"",description:"",categories:[],poster:"",backdrop:"",actors:[],similar_movies:[]}),w=Object(r.a)(k,2),y=w[0],C=w[1],S=function(e){C(Object(V.a)(Object(V.a)({},y),{},Object(M.a)({},e.target.name,e.target.value)));var t=e.target.value;""!==t&&f.fetchMovieData(void 0,t).then((function(e){b(e.results)}))},D=function(e){b(null),p(e.target.id)};Object(a.useEffect)((function(){if(O)if(0===s)f.fetchMovieData(O).then((function(e){var t=e.title,c=e.release_date,a=(e.overview,e.poster_path),s=e.backdrop_path,i=(e.genres,""),n="";a&&(i="https://image.tmdb.org/t/p/original".concat(a)),s&&(n="https://image.tmdb.org/t/p/original".concat(s));var r=e.genres.map((function(e){return e.name}));C(Object(V.a)(Object(V.a)({},y),{},{title:t,release_date:c,description:e.overview,categories:r,backdrop:n,poster:i}))}));else{var e="".concat(E,"movie/").concat(O,"/casts").concat(A),t="".concat(E,"movie/").concat(O,"/similar").concat(A),c=h.a.get(e),a=h.a.get(t);h.a.all([c,a]).then(h.a.spread((function(){for(var e=arguments.length,t=new Array(e),c=0;c<e;c++)t[c]=arguments[c];var a=t[0].data.cast,s=t[1].data.results,i=a.map((function(e){var t=e.profile_path,c=e.name,a=e.character;return{photo:"https://image.tmdb.org/t/p/original".concat(t),name:c,character:a}})),n=s.map((function(e){var t=e.poster_path,c=e.title,a=e.release_date;return{poster:"https://image.tmdb.org/t/p/original".concat(t),title:c,release_date:a}}));C(Object(V.a)(Object(V.a)({},y),{},{actors:i,similar_movies:n}))}))).catch((function(e){console.error(e)}))}}),[O,s]);var F=function(){i((function(e){return e-1}))},P=function(){window.location.reload()};Object(a.useEffect)((function(){e.movie&&C({title:e.movie.title,release_date:e.movie.release_date,description:e.movie.description,categories:e.movie.categories,poster:e.movie.poster,backdrop:e.movie.backdrop,actors:e.movie.actors,similar_movies:e.movie.similar_movies})}),[e.movie]);return Object(_.jsx)("div",{children:Object(_.jsxs)("form",{onSubmit:function(t){t.preventDefault(),i((function(e){return e+1})),s+1===2&&e.onValidation(y)},action:"#",className:"form",children:[s<2&&Object(_.jsxs)("div",{class:"form__step",children:[1===s?Object(_.jsx)("button",{className:"form__previous",onClick:F,type:"button",children:Object(_.jsx)(j.e,{})}):void 0,Object(_.jsxs)("span",{className:"title-small",children:[" ",s+1," sur ",2]})]}),s>=0&&Object(_.jsxs)("section",{className:0===s?"block":"hidden",children:[Object(_.jsx)("div",{className:"title-medium",children:"S\xe9lectionner un film"}),Object(_.jsxs)("div",{class:"form__select",children:[Object(_.jsx)("label",{className:"title-small",htmlFor:"title",children:"Titre"}),Object(_.jsx)("input",{type:"text",id:"title-id",name:"title",placeholder:"Titre",onChange:S,value:y.title}),d&&0!==d.length&&Object(_.jsx)("ul",{children:d.map((function(e){return Object(_.jsx)("li",{id:e.id,onClick:D,children:e.title},e.id)}))})]}),Object(_.jsxs)("div",{children:[Object(_.jsx)("label",{className:"title-small",htmlFor:"date",children:"Date de sortie"}),Object(_.jsx)("input",{type:"text",id:"date",name:"release_date",placeholder:"12-12-2021",onChange:S,value:y.release_date})]})]}),s>=1&&Object(_.jsxs)("section",{className:1===s?"block":"hidden",children:[Object(_.jsx)("h2",{className:"title-medium",children:"Personnaliser l'ajout"}),Object(_.jsxs)("div",{children:[Object(_.jsx)("label",{className:"title-small form__checkbox",htmlFor:"categories",children:"Cat\xe9gories"},"key"),y&&y.categories.map((function(e,t){return Object(_.jsxs)("label",{children:[Object(_.jsx)("input",{name:"categories",type:"checkbox",value:e,defaultChecked:g,onChange:function(){return N(!g)}}),e]},t)}))]}),Object(_.jsxs)("div",{children:[Object(_.jsx)("label",{className:"title-small",htmlFor:"description",children:"Description"}),Object(_.jsx)("textarea",{type:"textarea",id:"description",name:"description",onChange:S,value:y.description})]}),Object(_.jsxs)("div",{children:[Object(_.jsx)("label",{className:"title-small",htmlFor:"poster",children:"Affiche (url)"}),Object(_.jsx)("input",{type:"url",name:"poster",id:"poster",placeholder:"https://example.com",pattern:"https://.*",onChange:S,value:y.poster})]}),Object(_.jsxs)("div",{children:[Object(_.jsx)("label",{className:"title-small",htmlFor:"backdrop",children:"Banni\xe8re de fond (url)"}),Object(_.jsx)("input",{type:"url",name:"backdrop",id:"backdrop",placeholder:"https://example.com",pattern:"https://.*",size:"30",onChange:S,value:y.backdrop})]}),Object(_.jsxs)("div",{children:[Object(_.jsx)("label",{className:"title-small",htmlFor:"actors",children:"Acteur\xb7ice\xb7s"}),y.actors&&0!==y.actors.length&&Object(_.jsx)("div",{className:"form__actors",children:y.actors.map((function(e,t){return Object(_.jsxs)("div",{children:[Object(_.jsx)("img",{src:e.photo,alt:"".concat(e.name)}),Object(_.jsx)("h3",{children:e.name}),Object(_.jsx)("h3",{children:e.character}),Object(_.jsx)("button",{type:"button",onClick:function(){C(Object(V.a)(Object(V.a)({},y),{},{actors:y.actors.filter((function(t){return t.name!==e.name}))}))},children:"Delete"})]},t)}))})]}),Object(_.jsxs)("div",{children:[Object(_.jsx)("label",{className:"title-small",htmlFor:"similar",children:"Films du m\xeame genre"}),y.similar_movies&&0!==y.similar_movies.length&&Object(_.jsx)("div",{className:"form__actors",children:y.similar_movies.map((function(e,t){return Object(_.jsxs)("div",{children:[Object(_.jsx)("img",{src:e.poster,alt:"".concat(e.title),width:100}),Object(_.jsx)("h3",{children:e.title}),Object(_.jsx)("h3",{children:e.release_date}),Object(_.jsx)("button",{type:"button",onClick:function(){C(Object(V.a)(Object(V.a)({},y),{},{similar_movies:y.similar_movies.filter((function(t){return t.title!==e.title}))}))},children:"Delete"})]},t)}))})]})]}),2===s?Object(_.jsx)("section",{children:Object(_.jsxs)("div",{className:"form__success",children:[Object(_.jsx)("p",{children:"Bien jou\xe9 !"}),Object(_.jsx)("p",{children:"Le film a \xe9t\xe9 ajout\xe9/modifi\xe9 avec succ\xe8s."}),Object(_.jsxs)("button",{onClick:P,type:"button",children:[Object(_.jsx)(j.a,{})," Ajouter un film"]}),Object(_.jsxs)(l.b,{className:"button",to:{pathname:"/"},children:[Object(_.jsx)(j.d,{})," Retourner \xe0 l'accueil"]})]})}):Object(_.jsxs)("button",{className:"submit-button",type:"submit",children:[" ",s?"Valider":"Rechercher"]})]})})},T=function(){var e=Object(a.useState)(null),t=Object(r.a)(e,2),c=t[0],s=t[1];return Object(_.jsxs)("div",{className:"pages-background",children:[Object(_.jsx)(C,{}),Object(_.jsxs)("h1",{className:"title-large",children:[Object(_.jsx)("span",{children:"Ajouter un"}),Object(_.jsx)("span",{children:"film"})]}),c&&Object(_.jsx)("div",{className:"error",children:c}),Object(_.jsx)(P,{onValidation:function(e){f.add(e).catch((function(e){return s(e.message)}))}})]})},I=function(){var e=Object(g.g)().id,t=Object(a.useState)(),c=Object(r.a)(t,2),s=c[0],i=c[1],n=Object(a.useState)(null),l=Object(r.a)(n,2),o=l[0],j=l[1];return Object(a.useEffect)((function(){f.fetchMovies(e).then((function(e){return i(e)}))}),[e]),Object(_.jsxs)("div",{className:"pages-background",children:[Object(_.jsx)(C,{}),o&&Object(_.jsx)("div",{className:"error",children:o}),s&&Object(_.jsxs)("div",{className:"edit-main",children:[Object(_.jsxs)("h1",{className:"title-large",children:[Object(_.jsxs)("span",{children:["\xab\xa0",s.title,"\xa0\xbb"]}),Object(_.jsx)("span",{children:"Modifier"})]}),Object(_.jsx)(P,{onValidation:function(t){f.update(t,e).catch((function(e){return j(e.message)}))},movie:s})]})]})},B=function(){var e=Object(g.g)().id;D.d.use([D.a]);var t=Object(a.useState)(null),c=Object(r.a)(t,2),s=c[0],i=c[1];return Object(a.useEffect)((function(){e&&f.fetchMovies(e).then((function(e){i(e)}))}),[]),Object(_.jsx)("div",{children:s&&Object(_.jsxs)("div",{className:"details pages-background",children:[Object(_.jsx)("div",{className:"details-bg",style:{backgroundImage:"url(".concat(s.backdrop,")")}}),Object(_.jsxs)("div",{className:"details-structure",children:[Object(_.jsx)(C,{}),Object(_.jsxs)("div",{class:"details-main",children:[Object(_.jsx)("h1",{className:"title-large",children:s.title}),Object(_.jsxs)("div",{class:"details-buttons",children:[Object(_.jsx)(w,{id:e},e),Object(_.jsx)(N,{id:s.id,title:s.title})]}),Object(_.jsxs)("div",{className:"details__swiper",children:[Object(_.jsx)("div",{className:"details__swiper--bg2",style:{backgroundImage:"url(".concat(s.backdrop,")")}}),Object(_.jsxs)(S.a,{className:"details__swiper--content",modules:[D.b,D.c],centeredSlides:!0,pagination:{clickable:!0},navigation:!0,slidesPerView:1,children:[Object(_.jsx)(S.b,{children:Object(_.jsxs)("div",{className:"details__swiper--flex details__swiper--from-left",children:[Object(_.jsx)("div",{children:Object(_.jsx)("img",{src:s.poster,alt:"Couverture"})}),Object(_.jsxs)("div",{children:[Object(_.jsx)("div",{className:"title-medium",children:o.formatDate("".concat(s.release_date))}),Object(_.jsx)("div",{className:"title-small",children:s.categories.join(", ")}),Object(_.jsx)("div",{className:"details__swiper--description",children:s.description})]})]})}),Object(_.jsx)(S.b,{children:Object(_.jsx)("div",{className:"details__swiper--flex2",children:s.actors.map((function(e,t){return Object(_.jsxs)("div",{children:[Object(_.jsx)("img",{src:e.photo,alt:e.name}),Object(_.jsx)("span",{children:e.name},t),Object(_.jsx)("span",{class:"title-small",children:e.character},t)]})}))})}),Object(_.jsx)(S.b,{children:Object(_.jsx)("div",{className:"details__swiper--similar",children:Object(_.jsxs)("div",{children:[Object(_.jsx)("div",{className:"title-medium",children:"Films similaires\xa0:"}),Object(_.jsx)("div",{className:"details__swiper--similar-list",children:s.similar_movies.map((function(e,t){return Object(_.jsx)("p",{children:e.title},t)}))})]})})})]})]})]})]})]})})},L=function(){return Object(_.jsxs)("div",{className:"pages-background",children:[Object(_.jsx)(C,{}),Object(_.jsxs)("h1",{className:"title-large",children:[Object(_.jsx)("span",{children:"404"}),Object(_.jsx)("span",{children:"Erreur"})]})]})};var R=function(){return Object(_.jsx)("div",{children:Object(_.jsx)(l.a,{children:Object(_.jsxs)(g.c,{children:[Object(_.jsx)(g.a,{path:"/",element:Object(_.jsx)(F,{})}),Object(_.jsx)(g.a,{path:"/add",element:Object(_.jsx)(T,{})}),Object(_.jsx)(g.a,{path:"/movies/:id",element:Object(_.jsx)(B,{})}),Object(_.jsx)(g.a,{path:"/edit/:id",element:Object(_.jsx)(I,{})}),Object(_.jsx)(g.a,{component:L})]})})})},q=function(e){e&&e instanceof Function&&c.e(3).then(c.bind(null,62)).then((function(t){var c=t.getCLS,a=t.getFID,s=t.getFCP,i=t.getLCP,n=t.getTTFB;c(e),a(e),s(e),i(e),n(e)}))};n.a.render(Object(_.jsx)(s.a.StrictMode,{children:Object(_.jsx)(R,{})}),document.getElementById("root")),q()}},[[61,1,2]]]);
//# sourceMappingURL=main.487b9538.chunk.js.map